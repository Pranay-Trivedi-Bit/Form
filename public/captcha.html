<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CAPTCHA Verified Lead Form</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="captcha-styles.css">
</head>
<body>
  <div class="page">
    <div class="form-container">
      <div class="form-card">

        <!-- Header -->
        <div class="form-card__header">
          <div class="form-card__icon">
            <svg viewBox="0 0 24 24" width="32" height="32" fill="none" stroke="#a78bfa" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
          </div>
          <h1 class="form-card__title">CAPTCHA Verified Lead Capture</h1>
          <p class="form-card__subtitle">Fill in your details and solve the CAPTCHA to submit</p>
        </div>

        <!-- Progress Steps (2-step) -->
        <div class="steps">
          <div class="step step--active" data-step="1">
            <div class="step__circle">1</div>
            <span class="step__label">Contact Details</span>
          </div>
          <div class="step__line"></div>
          <div class="step" data-step="2">
            <div class="step__circle">2</div>
            <span class="step__label">Confirmed</span>
          </div>
        </div>

        <!-- Step 1: Contact Form + CAPTCHA -->
        <div class="form-step" id="step1">
          <form id="captchaContactForm" novalidate>
            <div class="field-grid">
              <div class="field">
                <label for="fieldName">Full Name <span class="req">*</span></label>
                <input type="text" id="fieldName" placeholder="e.g. Jane Smith" required>
                <span class="field-error" id="errorName"></span>
              </div>
              <div class="field">
                <label for="fieldEmail">Email <span class="req">*</span></label>
                <input type="email" id="fieldEmail" placeholder="e.g. jane@acme.com" required>
                <span class="field-error" id="errorEmail"></span>
              </div>
              <div class="field">
                <label for="fieldPhone">Phone <span class="req">*</span></label>
                <input type="tel" id="fieldPhone" placeholder="e.g. 919876543210">
                <span class="field-error" id="errorPhone"></span>
                <span class="field-hint">Include country code without + or spaces</span>
              </div>
              <div class="field">
                <label for="fieldCompany">Company</label>
                <input type="text" id="fieldCompany" placeholder="e.g. Acme Corp">
              </div>
              <div class="field">
                <label for="fieldJobTitle">Job Title</label>
                <input type="text" id="fieldJobTitle" placeholder="e.g. IT Manager">
              </div>
              <div class="field">
                <label for="fieldLocation">Location</label>
                <input type="text" id="fieldLocation" placeholder="e.g. New Delhi, India">
              </div>
            </div>
            <div class="field" style="margin-top:16px;">
              <label for="fieldRemarks">Remarks / Interest</label>
              <textarea id="fieldRemarks" rows="3" placeholder="e.g. Interested in AWS certification..."></textarea>
            </div>

            <!-- CAPTCHA Section -->
            <div class="captcha-section">
              <label>Verify you are human <span class="req">*</span></label>
              <div class="captcha-row">
                <div class="captcha-image" id="captchaImage">
                  <span class="captcha-loading">Loading CAPTCHA...</span>
                </div>
                <button type="button" class="btn btn--ghost captcha-refresh" id="btnRefreshCaptcha" title="Get new CAPTCHA">
                  <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"/><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/></svg>
                </button>
              </div>
              <input type="text" id="fieldCaptcha" placeholder="Type the characters shown above" autocomplete="off" required>
              <span class="field-error" id="errorCaptcha"></span>
            </div>

            <input type="hidden" id="captchaSessionId">

            <div class="form-actions">
              <button type="submit" class="btn btn--primary btn--lg" id="btnSubmit">
                <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                Verify &amp; Submit
              </button>
            </div>
          </form>
        </div>

        <!-- Step 2: Success -->
        <div class="form-step" id="step2" style="display:none;">
          <div class="success">
            <div class="success__icon">
              <svg viewBox="0 0 24 24" width="56" height="56" fill="none" stroke="#34d399" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
            </div>
            <h2 class="success__title">Lead Verified & Submitted!</h2>
            <p class="success__text">The contact has been CAPTCHA-verified and recorded successfully.</p>
            <div class="success__summary" id="successSummary"></div>
            <div class="form-actions">
              <button class="btn btn--primary btn--lg" id="btnNewLead">
                <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                Capture Another Lead
              </button>
            </div>
          </div>
        </div>

      </div>

      <p class="footer">Powered by Koenig Solutions</p>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast-container" id="toastContainer"></div>

  <script src="captcha-app.js"></script>
</body>
</html>
